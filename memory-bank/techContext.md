# Технический контекст: Приложение для моковых собеседований

## Стек технологий

### Frontend

- **Основной фреймворк**: React с TypeScript
- **Управление состоянием**: Redux
- **Стилизация**: Styled-components
- **Маршрутизация**: React Router
- **UI-библиотека**: Material-UI или Ant Design
- **Формы и валидация**: Formik + Yup
- **Управление запросами**: React Query
- **Работа с датами**: Day.js
- **Визуализация данных**: Chart.js

### Backend

- **Платформа**: Node.js с Express
- **Язык**: TypeScript
- **ORM**: Prisma для работы с PostgreSQL
- **Реал-тайм коммуникация**: Socket.io
- **Аутентификация**: JWT
- **Логирование**: Winston
- **Тестирование**: Jest
- **Документация API**: Swagger
- **Отправка email**: Nodemailer
- **Управление очередями**: Bull

### База данных

- **Основная БД**: PostgreSQL
- **Кэширование**: Redis
- **Миграции**: Prisma Migrate

### DevOps и инфраструктура

- **Контейнеризация**: Docker
- **Оркестрация**: Docker Compose
- **CI/CD**: GitHub Actions
- **Веб-сервер**: Nginx (обратный прокси)
- **Мониторинг ошибок**: Sentry
- **Мониторинг производительности**: Prometheus + Grafana

## Инфраструктура

### Архитектура развертывания

```
┌─────────────────────────────────────────────────────────┐
│                      Nginx (80/443)                     │
└───────────────────────────┬─────────────────────────────┘
                            │
            ┌───────────────┴───────────────┐
            │                               │
┌───────────▼───────────┐       ┌───────────▼───────────┐
│    Frontend Static    │       │      API Gateway      │
│      (React App)      │       │      (Node.js)        │
└───────────────────────┘       └───────────┬───────────┘
                                            │
                ┌───────────────────────────┼───────────────────────────┐
                │                           │                           │
    ┌───────────▼───────────┐   ┌───────────▼───────────┐   ┌───────────▼───────────┐
    │  Auth Service (Node)  │   │  Core Service (Node)  │   │  Admin Service (Node)  │
    └───────────┬───────────┘   └───────────┬───────────┘   └───────────┬───────────┘
                │                           │                           │
                └───────────────┬───────────┴───────────────┬───────────┘
                                │                           │
                    ┌───────────▼───────────┐   ┌───────────▼───────────┐
                    │      PostgreSQL       │   │        Redis          │
                    └───────────────────────┘   └───────────────────────┘
```

### Сетевая архитектура

- Все сервисы размещены в одной Docker-сети
- Nginx выступает как единая точка входа
- Внутренняя коммуникация между сервисами через REST API
- Socket.io для реал-тайм обновлений между сервером и клиентами
- Redis используется как брокер сообщений для Pub/Sub

## Технические требования

### Производительность

- Время отклика API: < 200ms для 95% запросов
- Время загрузки страницы: < 2 секунды
- Поддержка до 1000 одновременных пользователей
- Эффективное кэширование для снижения нагрузки на БД

### Безопасность

- Хэширование паролей с использованием bcrypt
- JWT с коротким сроком жизни для аутентификации
- HTTPS для всех соединений
- Защита от основных уязвимостей (XSS, CSRF, SQL-инъекции)
- Валидация всех входных данных

### Масштабируемость

- Горизонтальное масштабирование сервисов
- Балансировка нагрузки между экземплярами
- Репликация базы данных для повышения доступности
- Кэширование часто запрашиваемых данных

### Доступность

- Целевая доступность: 99.9%
- Автоматическое восстановление после сбоев
- Резервное копирование данных
- Мониторинг и алерты при проблемах

## Разработка и тестирование

### Среда разработки

- **IDE**: VS Code с расширениями для TypeScript, React, Prisma
- **Управление версиями**: Git с GitHub
- **Управление зависимостями**: npm или yarn
- **Линтинг**: ESLint + Prettier
- **Локальная среда**: Docker Compose для всех сервисов

### Тестирование

- **Unit-тесты**: Jest для бэкенда и фронтенда
- **Integration-тесты**: Supertest для API
- **E2E-тесты**: Cypress для пользовательских сценариев
- **Нагрузочное тестирование**: k6 для проверки производительности
- **Мок-сервисы**: для изоляции компонентов при тестировании

### CI/CD пайплайн

1. **Сборка и линтинг**

   - Проверка стиля кода
   - Статический анализ
   - Компиляция TypeScript

2. **Тестирование**

   - Запуск unit-тестов
   - Запуск integration-тестов
   - Проверка покрытия кода

3. **Сборка Docker-образов**

   - Создание образов для каждого сервиса
   - Тегирование версий

4. **Развертывание**
   - Автоматическое развертывание в тестовую среду
   - Ручное подтверждение для продакшн
   - Миграции базы данных

## Мониторинг и логирование

### Мониторинг

- Prometheus для сбора метрик
- Grafana для визуализации и дашбордов
- Алерты при отклонении от нормы
- Мониторинг ключевых бизнес-метрик

### Логирование

- Централизованное логирование всех сервисов
- Структурированные логи в формате JSON
- Различные уровни логирования (debug, info, warn, error)
- Ротация и хранение логов
